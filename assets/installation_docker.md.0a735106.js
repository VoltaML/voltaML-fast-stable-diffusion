import{_ as s,o as a,c as n,Q as e}from"./chunks/framework.70b8ae0d.js";const b=JSON.parse('{"title":"Docker","description":"","frontmatter":{},"headers":[],"relativePath":"installation/docker.md","filePath":"installation/docker.md","lastUpdated":1699552968000}'),l={name:"installation/docker.md"},o=e(`<h1 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-label="Permalink to &quot;Docker&quot;">​</a></h1><p>Docker is not recommended as it is updated less frequently than the <a href="/voltaML-fast-stable-diffusion/installation/windows">Windows</a>, <a href="/voltaML-fast-stable-diffusion/installation/wsl">WSL</a> and <a href="/voltaML-fast-stable-diffusion/installation/linux">Linux</a> installations. However, it is the easiest way to get started with VoltaML in the cloud or on <a href="https://vast.ai/" target="_blank" rel="noreferrer">Vast.ai</a>.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This setup will require WSL2 on Windows. If you installed WSL or Docker before it was released, you will need to switch manually to WSL2.</p></div><p>This is the easiest setup possible that should just work. Docker provides reproducible environments and makes it easy to run the application on any system.</p><h2 id="requirements" tabindex="-1">Requirements <a class="header-anchor" href="#requirements" aria-label="Permalink to &quot;Requirements&quot;">​</a></h2><ul><li><strong>Operating system:</strong> Windows or Linux</li><li><strong>Graphics card:</strong> NVIDIA GPU with CUDA support</li><li><strong>Graphics card for AITemplate:</strong> RTX 40xx, RTX 30xx, H100, A100, A10, A30, V100, T4</li><li><strong>Driver version:</strong> 515+ with CUDA</li><li><strong>Docker</strong>: <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noreferrer">Docker Desktop</a></li></ul><h2 id="main-branch-default-stable" tabindex="-1">Main Branch (default - stable) <a class="header-anchor" href="#main-branch-default-stable" aria-label="Permalink to &quot;Main Branch (default - stable)&quot;">​</a></h2><h3 id="_1-clone-the-repository" tabindex="-1">1. Clone the repository <a class="header-anchor" href="#_1-clone-the-repository" aria-label="Permalink to &quot;1. Clone the repository&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro has-diff"><code><span class="line"><span style="color:#61AFEF;">git</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">clone</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">https://github.com/VoltaML/voltaML-fast-stable-diffusion</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--single-branch</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-get-inside-the-directory" tabindex="-1">2. Get inside the directory <a class="header-anchor" href="#_2-get-inside-the-directory" aria-label="Permalink to &quot;2. Get inside the directory&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro has-diff"><code><span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">voltaML-fast-stable-diffusion</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-edit-the-docker-compose-yml-file" tabindex="-1">3. Edit the <code>docker-compose.yml</code> file <a class="header-anchor" href="#_3-edit-the-docker-compose-yml-file" aria-label="Permalink to &quot;3. Edit the \`docker-compose.yml\` file&quot;">​</a></h3><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro has-focused-lines"><code><span class="line"><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;3.7&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">services</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">voltaml</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">image</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">stax124/volta:latest</span></span>
<span class="line has-focus"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">pull_policy</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">always</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">environment</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">HUGGINGFACE_TOKEN=\${HUGGINGFACE_TOKEN}</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">LOG_LEVEL=\${LOG_LEVEL}</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">FASTAPI_ANALYTICS_KEY=\${FASTAPI_ANALYTICS_KEY}</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">DISCORD_BOT_TOKEN=\${DISCORD_BOT_TOKEN}</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">EXTRA_ARGS=\${EXTRA_ARGS}</span></span>
<span class="line has-focus"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">volumes</span><span style="color:#ABB2BF;">: </span></span>
<span class="line has-focus"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">XXX:/app/data</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># XXX is the path to the folder where all the outputs will be saved </span></span>
<span class="line has-focus"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">YYY/.cache/huggingface:/root/.cache/huggingface</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># YYY is path to your home folder (you may need to change the YYY/. cache/huggingface to YYY\\.cache\\huggingface on Windows) </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">ports</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">&quot;5003:5003&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">deploy</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">resources</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">reservations</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">devices</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">driver</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">nvidia</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E06C75;">capabilities</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;gpu&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">volumes</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">: {}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li><code>XXX</code> is the path to the directory where you want to store all the data (converted models, outputs)</li><li><code>YYY</code> is the path to your home directory (<code>C:\\Users\\YOUR_USERNAME</code> or <code>/home/USER</code>).</li><li><code>pull_policy: always</code> means that you will always try to get the latest image. Feel free to set it to <code>missing</code> to download only if it isn&#39;t present on your system</li></ul><h3 id="_4-edit-the-env-file" tabindex="-1">4. Edit the <code>.env</code> file <a class="header-anchor" href="#_4-edit-the-env-file" aria-label="Permalink to &quot;4. Edit the \`.env\` file&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro has-focused-lines"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># Hugging Face Token (https://huggingface.co/settings/tokens)</span></span>
<span class="line has-focus"><span style="color:#E06C75;">HUGGINGFACE_TOKEN</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">YOUR_TOKEN_HERE</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)</span></span>
<span class="line"><span style="color:#E06C75;">LOG_LEVEL</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">INFO</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># [Optional] Analytics (https://my-api-analytics.vercel.app/generate) (https://my-api-analytics.vercel.app/dashboard)</span></span>
<span class="line"><span style="color:#E06C75;">FASTAPI_ANALYTICS_KEY</span><span style="color:#56B6C2;">=</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># [Optional] Discord Bot Token (https://discord.com/developers/applications)</span></span>
<span class="line"><span style="color:#E06C75;">DISCORD_BOT_TOKEN</span><span style="color:#56B6C2;">=</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># [Optional] Extra arguments for the API</span></span>
<span class="line"><span style="color:#E06C75;">EXTRA_ARGS</span><span style="color:#56B6C2;">=</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_5-run-the-container" tabindex="-1">5. Run the container <a class="header-anchor" href="#_5-run-the-container" aria-label="Permalink to &quot;5. Run the container&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#61AFEF;">docker</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">compose</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">run</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--service-ports</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">voltaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>or if you have older version of docker</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#61AFEF;">docker-compose</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">run</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-p</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">5003</span><span style="color:#98C379;">:5003</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">voltaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="experimental-branch-development-unstable" tabindex="-1">Experimental Branch (development - unstable) <a class="header-anchor" href="#experimental-branch-development-unstable" aria-label="Permalink to &quot;Experimental Branch (development - unstable)&quot;">​</a></h2><p>If you would like to have the latest features and bug fixes, and you do not mind having unstable container, then feel free to use this branch.</p><h3 id="_1-clone-the-repository-1" tabindex="-1">1. Clone the repository <a class="header-anchor" href="#_1-clone-the-repository-1" aria-label="Permalink to &quot;1. Clone the repository&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro has-diff"><code><span class="line"><span style="color:#61AFEF;">git</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">clone</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">https://github.com/VoltaML/voltaML-fast-stable-diffusion</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-b</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">experimental</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--single-branch</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-get-inside-the-directory-1" tabindex="-1">2. Get inside the directory <a class="header-anchor" href="#_2-get-inside-the-directory-1" aria-label="Permalink to &quot;2. Get inside the directory&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro has-diff"><code><span class="line"><span style="color:#56B6C2;">cd</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">voltaML-fast-stable-diffusion</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_3-edit-the-docker-compose-yml-file-1" tabindex="-1">3. Edit the <code>docker-compose.yml</code> file <a class="header-anchor" href="#_3-edit-the-docker-compose-yml-file-1" aria-label="Permalink to &quot;3. Edit the \`docker-compose.yml\` file&quot;">​</a></h3><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#D19A66;">..</span></span>
<span class="line"><span style="color:#E06C75;">image</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">stax124/volta:experimental</span></span>
<span class="line"><span style="color:#D19A66;">..</span></span>
<span class="line"><span style="color:#E06C75;">volumes</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">XXX:/app/data</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#98C379;">YYY/.cache/huggingface:/root/.cache/huggingface</span></span>
<span class="line"><span style="color:#D19A66;">..</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Where <code>XXX</code> is the path to the directory where you want to store all the data (converted models, outputs) and <code>YYY</code> is the path to your home directory (<code>C:\\Users\\YOUR_USERNAME</code> or <code>/home/USER</code>).</p><p>Make sure you replace the <code>image</code> property with <code>stax124/volta:experimental</code></p><h3 id="_4-edit-the-env-file-1" tabindex="-1">4. Edit the <code>.env</code> file <a class="header-anchor" href="#_4-edit-the-env-file-1" aria-label="Permalink to &quot;4. Edit the \`.env\` file&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">HUGGINGFACE_TOKEN</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">PLACE_YOUR_TOKEN_HERE</span></span>
<span class="line"><span style="color:#E06C75;">LOG_LEVEL</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">INFO</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># INFO, DEBUG, WARNING, ERROR</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-run-the-container-1" tabindex="-1">5. Run the container <a class="header-anchor" href="#_5-run-the-container-1" aria-label="Permalink to &quot;5. Run the container&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#61AFEF;">docker</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">compose</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">run</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">--service-ports</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">voltaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>or if you have older version of docker</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#61AFEF;">docker-compose</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">run</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-p</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">5003</span><span style="color:#98C379;">:5003</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">voltaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,36),p=[o];function t(r,c,i,d,y,u){return a(),n("div",null,p)}const B=s(l,[["render",t]]);export{b as __pageData,B as default};
